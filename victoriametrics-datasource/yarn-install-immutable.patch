diff --git a/package.json b/package.json
index f3112b3..fe6b3ba 100755
--- a/package.json
+++ b/package.json
@@ -12,7 +12,7 @@
     "lint": "eslint --cache --ignore-path ./.gitignore --ext .js,.jsx,.ts,.tsx .",
     "lint:fix": "yarn lint --fix",
     "server": "docker compose up",
-    "preinstall": "cd packages/lezer-metricsql && yarn install && cd ../..",
+    "preinstall": "cd packages/lezer-metricsql && yarn install --immutable && cd ../..",
     "postinstall": "yarn upgrade lezer-metricsql",
     "sign": "[ -z $GRAFANA_ACCESS_POLICY_TOKEN ] && echo 'skip plugin signing' || npx --yes @grafana/sign-plugin@latest"
   },
